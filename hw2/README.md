# Отчет по Redis

## Поднимем Базу данных

Для этого поднимем с помощью `docker` файл `compose.yml`.

## Заполнение данных

Для генерации большого `json` файла, воспользуемся `python`.  Он будет сосотоять из случайных обьектов пользователя, хранящий информацию о нем.

Код для генерации и заполнения БД описан в [fill.py](fill.py).

В резльтате получаем, что методы заполнения очень похожи:

```bash
string: took 24119.223ms

hset: took 24077.693ms

list: took 24480.579ms

zset: took 24747.880ms
```

Возможно это связано с ограничением на скорость отправки запросов в `python`, а не эквивалентностью методов, однако исследовать это желания нет.

## Запросы

Для начала попробуем обратится к случайному пользователю и найдем в нем конкретное поле. Код тестирования приведен в [get.py](get.py).

```bash
GET All:
string: 0.128ms per request
hset: 0.123ms per request
list: 0.122ms per request
zset: 0.127ms per request

GET Field:
string: 0.122ms per request
hset: 0.124ms per request
list: 0.126ms per request
zset: 0.128ms per request
```

Получаем, что времена практически совпадают, что ожидаемо, так как размер каждого обьекта мал.

Теперь попробуем обновлять все данные о пользователе, а также менять конкретное поле, как описано в [set.py](set.py):

```bash
SET All:
string: 0.254ms per request
hset: 0.249ms per request
list: 0.232ms per request
zset: 0.247ms per request

SET Field:
string: 0.233ms per request
hset: 0.113ms per request
list: 0.225ms per request
zset: 0.123ms per request
```

Таким образом для точечного изменения значительно лучше использовать `hset` и `zset`, так как обновление происходит значительно быстрее. Строку замедляет выгрузка всех полей перед изменение, почему так плохо работает список для меня загадка.

## Кластер

Аналогично найденной [статье](https://medium.com/@ahmettuncertr/redis-cluster-using-docker-1c8458a93d4b) поднимем кластер.
